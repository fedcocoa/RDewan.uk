<html>
<link rel="stylesheet" type="text/css" href="index.css">
<title>RD.js - Dijkstra's</title>
<body>
<canvas id="canvas">
    <script type="text/javascript" src="RD.js"></script>
    <script>
        canvasCheck();
        canvasSize(window.innerWidth, window.innerHeight);
        setFont(15, "sans-serif");

        let nodeColour = "#ffbea8";
        let textColour = "#000000";
        let lineColour = "#ff9d91";
        let startColour = "#31fff8";
        let lineWidth = 2;

        class PriorityQueue {
            constructor() {
                this.items = [];
            }

            merge(a,b) {
                let newList = [];
                for(let x = 0; x <= a.length-1; x++) {
                    newList[x] = a[x];
                }
                for(let y = 0; y <= b.length-1; y++) {
                    newList[a.length+y] = b[y];
                }
                return newList;
            }

            removeNulls(items) {
                let newList = [];
                for(let i = 0; i <= items.length-1; i++) {
                    if(items[i] != null) {
                        newList[newList.length] = items[i];
                    }
                }
                return newList;
            }

            enQueue(nodes) {
                for(let x = 0; x <= nodes.length-1; x++) {
                    for(let y = 0; y <= this.items.length-1; y++) {
                        if(nodes[x] == this.items[y]) {
                            this.items[y] = null;
                        }
                    }
                }
                this.items = this.removeNulls(this.items);
                this.items = this.merge(nodes,this.items);
            }

        }

        class Arc {
            constructor(start, finish, value) {
                this.start = start;
                this.finish = finish;
                this.value = value;
                this.line = new Line(start.pos, finish.pos, lineWidth, lineColour);
                this.text = new Text(value, Point.midPoint(start.pos, finish.pos), textColour);
            }
        }

        class Node {
            constructor(name, pos) {
                this.name = name;
                this.value = Infinity;
                this.pos = pos;
                this.circle = new Circle(pos, 10, nodeColour, "fill");
                this.text = new Text(name + " : " + this.value, new Point(pos.x - 5, pos.y - 10), textColour);
            }

            updateValue(newValue) {
                this.value = newValue;
                this.text.string = this.name + " : " + newValue;
            }

        }

        class Graph {
            constructor() {
                this.arcs = [];
                this.nodes = {};
            }

            getNeighbours(node) {
                let neighbours = [];
                for(let i = 0; i <= this.arcs.length-1; i++) {
                    if(this.arcs[i].start == node) {
                        neighbours[neighbours.length] = this.arcs[i].finish;
                    }
                    if(this.arcs[i].finish == node) {
                        neighbours[neighbours.length] = this.arcs[i].start;
                    }
                }
                return neighbours;
            }

            setStart(node) {
                this.startNode = node;
                node.updateValue(0);
                node.circle.colour = startColour;
            }

            addArc(arc) {
                this.arcs[this.arcs.length] = arc;
            }

            addNode(node) {
                this.nodes[node.name] = node;
            }

        }

        let graph = new Graph();
        let queue = new PriorityQueue();
        graph.addNode(new Node("A", new Point(100, 50)));
        graph.addNode(new Node("B", new Point(100, 300)));
        graph.addNode(new Node("C", new Point(600, 50)));
        graph.addNode(new Node("D", new Point(400, 500)));
        graph.addNode(new Node("E", new Point(350, 200)));
        graph.addNode(new Node("F", new Point(600, 500)));
        graph.addNode(new Node("G", new Point(350, 300)));
        graph.addNode(new Node("H", new Point(350, 125)));
        graph.addArc(new Arc(graph.nodes["A"], graph.nodes["B"], 5));
        graph.addArc(new Arc(graph.nodes["B"], graph.nodes["D"], 7));
        graph.addArc(new Arc(graph.nodes["C"], graph.nodes["E"], 10));
        graph.addArc(new Arc(graph.nodes["D"], graph.nodes["F"], 12));
        graph.addArc(new Arc(graph.nodes["E"], graph.nodes["A"], 3));
        graph.addArc(new Arc(graph.nodes["E"], graph.nodes["B"], 6));
        graph.addArc(new Arc(graph.nodes["A"], graph.nodes["C"], 4));
        //graph.addArc(new Arc(graph.nodes["D"], graph.nodes["E"], 11));
        graph.addArc(new Arc(graph.nodes["C"], graph.nodes["F"], 15));
        graph.addArc(new Arc(graph.nodes["C"], graph.nodes["D"], 8));
        graph.addArc(new Arc(graph.nodes["C"], graph.nodes["G"], 5));
        graph.addArc(new Arc(graph.nodes["B"], graph.nodes["G"], 9));
        graph.addArc(new Arc(graph.nodes["D"], graph.nodes["G"], 6));
        graph.addArc(new Arc(graph.nodes["A"], graph.nodes["H"], 7));
        graph.addArc(new Arc(graph.nodes["C"], graph.nodes["H"], 3));
        graph.addArc(new Arc(graph.nodes["E"], graph.nodes["H"], 3));
        graph.setStart(graph.nodes["A"]);

    </script>
</body>
</html>
